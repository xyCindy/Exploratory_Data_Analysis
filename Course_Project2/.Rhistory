print(g)
subset <- neiData[neiData$fips == "24510", ]
subset <- NEI[NEI$fips == "24510", ]
g <- ggplot(subset, aes(year, Emissions, color = type))
g + geom_line(stat = "summary", fun.y = "sum") +
ylab(expression('Total PM'[2.5]*" Emissions")) +
ggtitle("Total Emissions in Baltimore City from 1999 to 2008")
png(filename = "./figure/plot3.png",
width = 480,
height = 480,
units = "px",
bg ="transparent")
# Question 3
# Of the four types of sources indicated by the type (point, nonpoint, onroad,
# nonroad) variable, which of these four sources have seen decreases in emissions
# from 1999–2008 for Baltimore City?
# Which have seen increases in emissions from 1999–2008?
# Use the ggplot2 plotting system to make a plot answer this question.
emissionBal <- NEI[fips == "24510", ]
subset <- neiData[neiData$fips == "24510", ]
# Plotting function to make plot3
library(ggplot2)
g <- ggplot(emissionsByYearType, aes(year,Emissions, color = type))
g <- g + geom_line() +
labs(title = "Total Emissions by Type in Baltimore",
x = "Year",
y = "Total Emissions")
print(g)
# Close the PNG device
dev.off()
setwd("~/Documents/Exploratory_Data_Analysis/Course_Project2")
source("load_data.R")
# Call a png device
png(filename = "./figure/plot3.png",
width = 480,
height = 480,
units = "px",
bg ="transparent")
# Question 3
# Of the four types of sources indicated by the type (point, nonpoint, onroad,
# nonroad) variable, which of these four sources have seen decreases in emissions
# from 1999–2008 for Baltimore City?
# Which have seen increases in emissions from 1999–2008?
# Use the ggplot2 plotting system to make a plot answer this question.
emissionBal <- NEI[fips == "24510", ]
subset <- neiData[neiData$fips == "24510", ]
# Plotting function to make plot3
library(ggplot2)
g <- ggplot(emissionsByYearType, aes(year,Emissions, color = type))
g <- g + geom_line() +
labs(title = "Total Emissions by Type in Baltimore",
x = "Year",
y = "Total Emissions")
print(g)
# Close the PNG device
dev.off()
par("mar"=c(5.1, 4.5, 4.1, 2.1))
png(filename = "./figure/plot3.png",
width = 480, height = 480,
units = "px")
g <- ggplot(emissionBal, aes(year, Emissions, color = type))
g + geom_line(stat = "summary", fun.y = "sum") +
ylab(expression('Total PM'[2.5]*" Emissions")) +
ggtitle("Total Emissions in Baltimore City from 1999 to 2008")
dev.off()
g <- ggplot(emissionsByYearType, aes(year,Emissions, color = type))
g <- g + geom_bar(stat = "identity") +
labs(title = "Total Emissions by Type in Baltimore",
x = "Year",
y = "Total Emissions")
g
g <- ggplot(emissionsByYearType, aes(year,Emissions, color = type))
g <- g + geom_bar(colour = type, stat = "identity") +
labs(title = "Total Emissions by Type in Baltimore",
x = "Year",
y = "Total Emissions")
g
g <- ggplot(emissionsByYearType, aes(year,Emissions, fill = type))
g <- g + geom_bar(stat = "identity") +
labs(title = "Total Emissions by Type in Baltimore",
x = "Year",
y = "Total Emissions")
g
png(filename = "./figure/plot3.png",
width = 480,
height = 480,
units = "px",
bg ="transparent")
# Question 3
# Of the four types of sources indicated by the type (point, nonpoint, onroad,
# nonroad) variable, which of these four sources have seen decreases in emissions
# from 1999–2008 for Baltimore City?
# Which have seen increases in emissions from 1999–2008?
# Use the ggplot2 plotting system to make a plot answer this question.
emissionBal <- NEI[fips == "24510", ]
subset <- neiData[neiData$fips == "24510", ]
# Plotting function to make plot3
library(ggplot2)
g <- ggplot(emissionsByYearType, aes(year,Emissions, fill = type))
g <- g + geom_bar(stat = "identity") +
labs(title = "Total Emissions by type in Baltimore",
x = "Year",
y = "Total Emissions")
# Close the PNG device
dev.off()
png(filename = "./figure/plot3.png",
width = 480,
height = 480,
units = "px",
bg ="transparent")
# Question 3
# Of the four types of sources indicated by the type (point, nonpoint, onroad,
# nonroad) variable, which of these four sources have seen decreases in emissions
# from 1999–2008 for Baltimore City?
# Which have seen increases in emissions from 1999–2008?
# Use the ggplot2 plotting system to make a plot answer this question.
emissionBal <- NEI[fips == "24510", ]
subset <- neiData[neiData$fips == "24510", ]
# Plotting function to make plot3
library(ggplot2)
g <- ggplot(emissionsByYearType, aes(year,Emissions, fill = type))
g <- g + geom_bar(stat = "identity") +
labs(title = "Total Emissions by type in Baltimore",
x = "Year",
y = "Total Emissions")
g
# Close the PNG device
dev.off()
head(SCC)
?grep
coaIdx <- grep("coal",Short.Name)
head(coaIdx)
coalIdx <- grep("coal",Short.Name)
coalIdx <- grep("coal",SCC$Short.Name)
str(coalIdx)
coalSCC <- SCC$SCC[coalIdx,1]
coalSCC <- SCC$SCC[coalIdx, ]
coalSCC <- SCC[coalIdx, ]
head(coalSCC)
source("load_data.R")
SCCdata <- readRDS("./exdata-data-NEI_data/Source_Classification_Code.rds")
dim(SCCdata)
coalIdx <- grep("coal",SCCdata$Short.Name)
coalSCC <- SCCdata[coalIdx,SCC]
coalSCC <- SCCdata[coalIdx,SCCdata$SCC]
head(SCCdata)
coalSCC <- SCCdata[coalIdx,SCCdata$SCC]
coalSCC <- SCCdata[coalIdx,1]
head(SCCdata$SCC)
coalSCC <- SCCdata[coalIdx, SCCdata$SCC]
coalSCC <- SCCdata[coalIdx, 1]
names(NEI)
coalSub <- NEI[SCC %in% coalSCC, ]
head(coalSub)
str(coalSub)
coalSCC <- SCCdata[coalIdx, ]
str(coalSCC)
coalSCC <- SCCdata[coalIdx, ]
str(coalSCC)
str(coalIdx)
coalSCC <- SCCdata[coalIdx, 1]
str(coalSCC)
coalSCC
coalSub <- NEI[NEI$SCC %in% coalSCC, ]
str(coalSub)
library(ggplot2)
g <- ggplot(coalSub, aes(year,Emissions, fill = SCC))
g + geom_bar(stat = "identity") +
labs(title = "Total Emissions from coal combustion-related sources",
x = "Year",
y = "Total Emissions")
g <- ggplot(coalSub, aes(year,Emissions))
g + geom_bar(stat = "identity") +
labs(title = "Total Emissions from coal combustion-related sources",
x = "Year",
y = "Total Emissions")
barplot(height = coalSub$emissions,
names.arg = coalSub$year,
col = "orange",
main = "Total Emissions From Coal Combustion-related\n Sources from 1999 to 2008",
xlab = "Year",
ylab = expression('Total PM'[2.5]*" Emission"))
barplot(height = coalSub$Emissions,
names.arg = coalSub$year,
col = "orange",
main = "Total Emissions From Coal Combustion-related\n Sources from 1999 to 2008",
xlab = "Year",
ylab = expression('Total PM'[2.5]*" Emission"))
coalEmission <- aggregate(Emissions ~ year,coalSub,FUN ="sum")
barplot(height = coalEmission$Emissions,
names.arg = coalEmission$year,
col = "orange",
main = "Total Emissions From Coal Combustion-related\n Sources from 1999 to 2008",
xlab = "Year",
ylab = expression('Total PM'[2.5]*" Emission"))
png(filename = "./figure/plot4.png",
width = 480,
height = 480,
units = "px",
bg ="transparent")
# Question 4
# Across the United States, how have emissions from coal combustion-related
# sources changed from 1999–2008?
coalIdx <- grep("coal",SCCdata$Short.Name)
# Select only SCC column in SCCdata
coalSCC <- SCCdata[coalIdx, 1]
# Select corresponding subset from NEI dataset
coalSub <- NEI[NEI$SCC %in% coalSCC, ]
coalEmission <- aggregate(Emissions ~ year,coalSub,FUN ="sum")
# Plotting function to make plot4
barplot(height = coalEmission$Emissions,
names.arg = coalEmission$year,
col = "orange",
main = "Total Emissions From Coal Combustion-related\n Sources from 1999 to 2008",
xlab = "Year",
ylab = expression('Total PM'[2.5]*" Emission"))
# Close the PNG device
dev.off()
motorIdx <- grep("motor",SCCdata$Short.Name)
str(motorIdx)
motorIdx
motorIdx <- grep("motor",SCCdata$Short.Name)
motorIdx
head(SCCdata)
lower("ABC")
?lowercase
tolower("ABC")
coalIdx <- grep("coal",tolower(SCCdata$Short.Name))
st(coalIdx)
str(coalIdx)
coalIdx <- grep("coal combustion",tolower(SCCdata$Short.Name))
str(coalIdx)
coalIdx <- grep("combustion",tolower(SCCdata$Short.Name))
str(coalIdx)
coalIdx <- grep("combustion",tolower(SCCdata$Short.Name),ignore.case = T)
str(coalIdx)
coalIdx
coalIdx <- grep("combustion",tolower(SCCdata$Short.Name),ignore.case = F)
coalIdx
?grep
coalIdx <- grep("coal combustion",SCCdata$Short.Name,ignore.case = T)
coalIdx
coalIdx <- grep("coal",SCCdata$Short.Name,ignore.case = T)
coalIdx
png(filename = "./figure/plot4.png",
width = 480,
height = 480,
units = "px",
bg ="transparent")
# Question 4
# Across the United States, how have emissions from coal combustion-related
# sources changed from 1999–2008?
# ignore.case = T, ignore case sensitive
coalIdx <- grep("coal",SCCdata$Short.Name,ignore.case = T)
# Select only SCC column in SCCdata
coalSCC <- SCCdata[coalIdx, 1]
# Select corresponding subset from NEI dataset
coalSub <- NEI[NEI$SCC %in% coalSCC, ]
coalEmission <- aggregate(Emissions ~ year,coalSub,FUN ="sum")
# Plotting function to make plot4
barplot(height = coalEmission$Emissions,
names.arg = coalEmission$year,
col = "orange",
main = "Total Emissions From Coal Combustion-related\n Sources from 1999 to 2008",
xlab = "Year",
ylab = expression('Total PM'[2.5]*" Emission"))
# Close the PNG device
dev.off()
motorIdx <- grep("motor",SCCdata$Short.Name, ignore.case = TRUE)
str(motorIdx)
motorSCC <- SCCdata[motorIdx, 1]
motorSub <- NEI[NEI$SCC %in% motorSCC, ]
motorEmission <- aggregate(Emissions ~ year,motorSub,FUN ="sum")
motorEmission
motorSub <- NEI[NEI$SCC %in% motorSCC & fips == "24510", ]
motorEmission <- aggregate(Emissions ~ year,motorSub,FUN ="sum")
barplot(height = motorEmission$Emissions,
names.arg = motorEmission$year,
col = "pink",
main = "Total PM2.5 emission in Baltimore MD from 1999 to 2008",
xlab = "Year",
ylab = expression('Total PM'[2.5]*" Emission"))
barplot(height = motorEmission$Emissions,
names.arg = motorEmission$year,
col = "pink",
main = "Total Emissions from motor vehicle source in Baltimore City,
\nMaryland from 1999 to 2008'",
xlab = "Year",
ylab = expression('Total PM'[2.5]*" Emission"))
barplot(height = motorEmission$Emissions,
names.arg = motorEmission$year,
col = "pink",
main = "Total Emissions from motor vehicle source \nin Baltimore MD
from 1999 to 2008'",
xlab = "Year",
ylab = expression('Total PM'[2.5]*" Emission"))
barplot(height = motorEmission$Emissions,
names.arg = motorEmission$year,
col = "pink",
main = "Total Emissions from motor vehicle source
\nin Baltimore MD
from 1999 to 2008",
xlab = "Year",
ylab = expression('Total PM'[2.5]*" Emission"))
barplot(height = motorEmission$Emissions,
names.arg = motorEmission$year,
col = "pink",
main = "Total Emissions from motor vehicle source \nin Baltimore MD from 1999 to 2008",
xlab = "Year",
ylab = expression('Total PM'[2.5]*" Emission"))
png(filename = "./figure/plot5.png",
width = 480,
height = 480,
units = "px",
bg ="transparent")
# Question 5
# How have emissions from motor vehicle sources changed from 1999–2008 in
# Baltimore City?
motorIdx <- grep("motor",SCCdata$Short.Name, ignore.case = TRUE)
# Select only SCC column in SCCdata
motorSCC <- SCCdata[motorIdx, 1]
# Select corresponding subset from NEI dataset
motorSub <- NEI[NEI$SCC %in% motorSCC & fips == "24510", ]
motorEmission <- aggregate(Emissions ~ year,motorSub,FUN ="sum")
# Plotting function to make plot2
barplot(height = motorEmission$Emissions,
names.arg = motorEmission$year,
col = "pink",
main = "Total Emissions from motor vehicle source \nin Baltimore MD from 1999 to 2008",
xlab = "Year",
ylab = expression('Total PM'[2.5]*" Emission"))
# Close the PNG device
dev.off(
)
motorIdx <- grep("motor",SCCdata$Short.Name, ignore.case = TRUE)
# Select only SCC column in SCCdata
motorSCC <- SCCdata[motorIdx, 1]
# Select corresponding subset from NEI dataset
motorBal <- NEI[NEI$SCC %in% motorSCC & fips == "24510", ]
motorLa <- NEI[NEI$SCC %in% motorSCC & fips == "06037", ]
motorBalE <- aggregate(Emissions ~ year,motorBal,FUN ="sum")
motorLaE <- aggregate(Emissions ~ year,motorLa,FUN ="sum")
motorBalE
motorLaE
motorSub <- NEI[NEI$SCC %in% motorSCC & (fips == "24510"|fips == "06037"), ]
head(motorSub)
motorBalLA <- aggregate(Emissions ~ year+fips,motorSub,FUN ="sum")
motorBalLA
?gsub
g <- ggplot(motorBalLA, aes(year,Emissions, fill = flips))
g + geom_bar(stat = "identity") +
labs(title = "Total Emissions by type in Baltimore",
x = "Year",
y = "Total Emissions")
g <- ggplot(motorBalLA, aes(year,Emissions, fill = fips))
g + geom_bar(stat = "identity") +
labs(title = "Total Emissions by type in Baltimore",
x = "Year",
y = "Total Emissions")
?geom_bar
g <- ggplot(motorBalLA, aes(year,Emissions, fill = fips))
g + geom_bar(stat = "identity") +
labs(title = "Total Emissions by type in Baltimore",
x = "Year",
y = "Total Emissions") +
scale_colour_discrete(name = "Group", label = c("Los Angeles","Baltimore"))
g <- ggplot(motorBalLA, aes(year,Emissions, fill = factor(fips)))
g + geom_bar(stat = "identity") +
labs(title = "Total Emissions by type in Baltimore",
x = "Year",
y = "Total Emissions")
g + geom_bar(stat = "identity",position="dodge") +
scale_fill_brewer(palette = "Set1")+
labs(title = "Total Emissions by type in Baltimore",
x = "Year",
y = "Total Emissions")
g <- ggplot(motorBalLA, aes(year,Emissions, fill = fips))
g + geom_bar(stat = "identity",position="dodge") +
labs(title = "Total Emissions by type in Baltimore",
x = "Year",
y = "Total Emissions")
g <- ggplot(motorBalLA, aes(year,Emissions, fill = fips))
g + geom_bar(stat = "identity",position="dodge") +
scale_fill_brewer(palette = "Set1")+
labs(title = "Total Emissions by type in Baltimore",
x = "Year",
y = "Total Emissions")
g <- ggplot(motorBalLA, aes(year,Emissions, fill = fips))
g + geom_bar(stat = "identity",position="dodge") +
labs(title = "Total Emissions by type in Baltimore",
x = "Year",
y = "Total Emissions") +
scale_colour_discrete(name = "Group", label = c("Los Angeles","Baltimore")
motorBalLA$fips <- gsub("24510","Baltimore, MD",motorBalLA$fips)
motorBalLA$fips <- gsub("24510","Baltimore, MD",motorBalLA$fips)
motorBalLA
motorBalLA$fips <- gsub("06037","Los Angeles, CA",motorBalLA$fips)
motorBalLA
g <- ggplot(motorBalLA, aes(year,Emissions, fill = fips))
g + geom_bar(stat = "identity",position="dodge") +
labs(title = "Total Emissions by type in Baltimore",
x = "Year",
y = "Total Emissions")
g + geom_line +
labs(title = "Total Emissions by type in Baltimore",
x = "Year",
y = "Total Emissions")
g + geom_line() +
labs(title = "Total Emissions by type in Baltimore",
x = "Year",
y = "Total Emissions")
g <- ggplot(motorBalLA, aes(year,Emissions, fill = fips))
g + geom_bar(stat = "identity",position="dodge") +
labs(title = "Total Emissions by type in Baltimore",
x = "Year",
y = "Total Emissions")
g + geom_line()+geom_point() +
labs(title = "Total Emissions by type in Baltimore",
x = "Year",
y = "Total Emissions")
g <- ggplot(motorSub, aes(year,Emissions, fill = fips))
g + geom_bar(stat = "identity",position="dodge") +
labs(title = "Total Emissions by type in Baltimore",
x = "Year",
y = "Total Emissions")
g <- ggplot(motorSub, aes(year,Emissions, fill = fips))
g + geom_line()+geom_point() +
labs(title = "Total Emissions by type in Baltimore",
x = "Year",
y = "Total Emissions")
g <- ggplot(motorBalLA, aes(year,Emissions, fill = fips))
g + geom_bar(stat = "identity",position="dodge") +
labs(title = "Total Emissions by type in Baltimore",
x = "Year",
y = "Total Emissions")
g <- ggplot(motorSub, aes(year, Emissions, color = fips))
g + geom_line(stat = "summary", fun.y = "sum") +
ylab(expression('Total PM'[2.5]*" Emissions")) +
ggtitle("Comparison of Total Emissions From Motor\n Vehicle Sources in Baltimore City\n and Los Angeles County from 1999 to 2008") +
scale_colour_discrete(name = "Group", label = c("Los Angeles","Baltimore"))
g
png(filename = "./figure/plot6.png",
width = 480,
height = 480,
units = "px",
bg ="transparent")
# Question 6
# Compare emissions from motor vehicle sources in Baltimore City with emissions
# from motor vehicle sources in Los Angeles County, California (fips == "06037").
# Which city has seen greater changes over time in motor vehicle emissions?
motorIdx <- grep("motor",SCCdata$Short.Name, ignore.case = TRUE)
# Select only SCC column in SCCdata
motorSCC <- SCCdata[motorIdx, 1]
# Select corresponding subset from NEI dataset
motorSub <- NEI[NEI$SCC %in% motorSCC & (fips == "24510"|fips == "06037"), ]
motorBalLA <- aggregate(Emissions ~ year+fips,motorSub,FUN ="sum")
# Replace fips number to location
motorBalLA$fips <- gsub("24510","Baltimore, MD",motorBalLA$fips)
motorBalLA$fips <- gsub("06037","Los Angeles, CA",motorBalLA$fips)
# Plotting function to make plot6
library(ggplot2)
g <- ggplot(motorBalLA, aes(year,Emissions, fill = fips))
g + geom_bar(stat = "identity",position="dodge") +
labs(title = "Total Emissions by type in Baltimore",
x = "Year",
y = "Total Emissions")
# Close the PNG device
dev.off()
g <- ggplot(motorBalLA, aes(year,Emissions, fill = fips))
g + geom_bar(stat = "identity",position="dodge") +
labs(title = "Comparison of Total Emissions From Motor\n Vehicle Sources
in Baltimore City\n and Los Angeles County from 1999 to 2008")",
x = "Year",
y = "Total Emissions")
library(ggplot2)
g <- ggplot(motorBalLA, aes(year,Emissions, fill = fips))
g + geom_bar(stat = "identity",position="dodge") +
labs(title = "Comparison of Total Emissions From Motor\n Vehicle Sources in Baltimore City\n and Los Angeles County from 1999 to 2008")",
x = "Year",
y = "Total Emissions")
g <- ggplot(motorBalLA, aes(year,Emissions, fill = fips))
g + geom_bar(stat = "identity",position="dodge") +
labs(title = "Comparison of Total Emissions From Motor\n Vehicle Sources in Baltimore City\n and Los Angeles County from 1999 to 2008",
x = "Year",
y = "Total Emissions")
png(filename = "./figure/plot6.png",
width = 480,
height = 480,
units = "px",
bg ="transparent")
# Question 6
# Compare emissions from motor vehicle sources in Baltimore City with emissions
# from motor vehicle sources in Los Angeles County, California (fips == "06037").
# Which city has seen greater changes over time in motor vehicle emissions?
motorIdx <- grep("motor",SCCdata$Short.Name, ignore.case = TRUE)
# Select only SCC column in SCCdata
motorSCC <- SCCdata[motorIdx, 1]
# Select corresponding subset from NEI dataset
motorSub <- NEI[NEI$SCC %in% motorSCC & (fips == "24510"|fips == "06037"), ]
motorBalLA <- aggregate(Emissions ~ year+fips,motorSub,FUN ="sum")
# Replace fips number to location
motorBalLA$fips <- gsub("24510","Baltimore, MD",motorBalLA$fips)
motorBalLA$fips <- gsub("06037","Los Angeles, CA",motorBalLA$fips)
# Plotting function to make plot6
library(ggplot2)
g <- ggplot(motorBalLA, aes(year,Emissions, fill = fips))
g + geom_bar(stat = "identity",position="dodge") +
labs(title = "Comparison of Total Emissions from Motor\n Vehicle Sources in Baltimore City\n and Los Angeles County from 1999 to 2008",
x = "Year",
y = "Total Emissions")
# Close the PNG device
dev.off()
